

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Use SUAVE with Docker &mdash; SUAVE v1.2.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=3130c8bc"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Run SUAVE" href="run.html" />
    <link rel="prev" title="Install SUAVE locally" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SUAVE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Install SUAVE locally</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Use SUAVE with Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#headless-docker-image">Headless docker image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-docker-images-locally">Build Docker images locally</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="run.html">Run SUAVE</a></li>
<li class="toctree-l1"><a class="reference internal" href="extend.html">Extending SUAVE and connecting managing subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="related.html">Related works</a></li>
<li class="toctree-l1"><a class="reference internal" href="citing.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SUAVE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Use SUAVE with Docker</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/docker.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="use-suave-with-docker">
<h1>Use SUAVE with Docker<a class="headerlink" href="#use-suave-with-docker" title="Link to this heading"></a></h1>
<p>You can pull and run the exemplar as a Docker container using the following command. Keep in mind you need to have <a class="reference external" href="https://docs.docker.com/get-docker/">Docker</a> installed on your computer and running.</p>
<p>In a terminal on your computer run:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--shm-size<span class="o">=</span>512m<span class="w"> </span>-p<span class="w"> </span><span class="m">6901</span>:6901<span class="w"> </span>-e<span class="w"> </span><span class="nv">VNC_PW</span><span class="o">=</span>password<span class="w"> </span>--security-opt<span class="w"> </span><span class="nv">seccomp</span><span class="o">=</span>unconfined<span class="w"> </span>ghcr.io/kas-lab/suave:main
</pre></div>
</div>
<p>Optionally you can add the parameter <code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">&lt;absolute_path_host_compute&gt;:/home/kasm-user/suave/results</span></code> to save the results into your computer, replace <code class="docutils literal notranslate"><span class="pre">&lt;absolute_path_host_compute&gt;</span></code> with the absolute path of where you want the data to be saved in your computer, e.g:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--shm-size<span class="o">=</span>512m<span class="w"> </span>-v<span class="w"> </span><span class="nv">$HOME</span>/suave_results:/home/kasm-user/suave/results<span class="w"> </span>-p<span class="w"> </span><span class="m">6901</span>:6901<span class="w"> </span>-e<span class="w"> </span><span class="nv">VNC_PW</span><span class="o">=</span>password<span class="w"> </span>--security-opt<span class="w"> </span><span class="nv">seccomp</span><span class="o">=</span>unconfined<span class="w"> </span>ghcr.io/kas-lab/suave:main
</pre></div>
</div>
<p><strong>SEAMS2023:</strong> To use the docker image used in the SEAMS2023 paper, replace <code class="docutils literal notranslate"><span class="pre">ghcr.io/kas-lab/suave:main</span></code> with <code class="docutils literal notranslate"><span class="pre">ghcr.io/kas-lab/suave:seams2023</span></code>.</p>
<p>Once the container is up and running, you can interface with it through your web browser. The container will be hosted locally at the port specified, in this case 6901. So in your browser, go to
<code class="docutils literal notranslate"><span class="pre">http://localhost:6901</span></code>.</p>
<p>A dialog will request a username and password, these are shown below, with the password being specifiable in the run command.</p>
<ul class="simple">
<li><p><strong>User</strong> : <code class="docutils literal notranslate"><span class="pre">kasm_user</span></code></p></li>
<li><p><strong>Password</strong>: <code class="docutils literal notranslate"><span class="pre">password</span></code></p></li>
</ul>
<!-- Now you can proceed to [run the exemplar](#run-suave). -->
<section id="headless-docker-image">
<h2>Headless docker image<a class="headerlink" href="#headless-docker-image" title="Link to this heading"></a></h2>
<p>We also provide a docker image without VCN/Web interface, so you can just run the experiments directly from your terminal without needing to log in into the web interface.</p>
<p>Pull image:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/kas-lab/suave-headless:main
</pre></div>
</div>
<p>Run image (without gpu):</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>suave_runner<span class="w"> </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span><span class="w"> </span>-e<span class="w"> </span><span class="nv">QT_X11_NO_MITSHM</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>-v<span class="w"> </span>/tmp/.X11-unix:/tmp/.X11-unix<span class="w"> </span>-v<span class="w"> </span>/etc/localtime:/etc/localtime:ro<span class="w"> </span>-v<span class="w"> </span><span class="nv">$HOME</span>/suave_ws/src/suave:/home/ubuntu-user/suave_ws/src/suave<span class="w"> </span>suave-headless
</pre></div>
</div>
<p>Run image (with nvidia)(don’t forget to install nvidia docker toolkit)[https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html]:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>--runtime<span class="o">=</span>nvidia<span class="w"> </span>--name<span class="w"> </span>suave_runner<span class="w"> </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span><span class="w"> </span>-e<span class="w"> </span><span class="nv">QT_X11_NO_MITSHM</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>-e<span class="w"> </span><span class="nv">NVIDIA_VISIBLE_DEVICES</span><span class="o">=</span>all<span class="w"> </span>-e<span class="w"> </span><span class="nv">NVIDIA_DRIVER_CAPABILITIES</span><span class="o">=</span>all<span class="w"> </span>-v<span class="w"> </span>/dev/dri:/dev/dri<span class="w"> </span>-v<span class="w"> </span>/tmp/.X11-unix:/tmp/.X11-unix<span class="w"> </span>-v<span class="w"> </span>/etc/localtime:/etc/localtime:ro<span class="w"> </span>-v<span class="w"> </span><span class="nv">$HOME</span>/suave_ws/src/suave:/home/ubuntu-user/suave_ws/src/suave<span class="w"> </span>suave-headless
</pre></div>
</div>
<p>You can try by running:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>suave_runner<span class="w"> </span>suave_runner<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--ros-args<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span>gui:<span class="o">=</span>False<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-p<span class="w"> </span>experiments:<span class="o">=</span><span class="s1">&#39;[</span>
<span class="s1">    &quot;{\&quot;experiment_launch\&quot;: \&quot;ros2 launch suave_bt suave_bt.launch.py\&quot;, \</span>
<span class="s1">      \&quot;num_runs\&quot;: 2, \</span>
<span class="s1">      \&quot;adaptation_manager\&quot;: \&quot;bt\&quot;, \</span>
<span class="s1">      \&quot;mission_name\&quot;: \&quot;suave\&quot;}&quot;</span>
<span class="s1">  ]&#39;</span>
</pre></div>
</div>
<p>If you want the image to have acess to the host GUI run the following command before running the image:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>xhost<span class="w"> </span>+
</pre></div>
</div>
</section>
<section id="build-docker-images-locally">
<h2>Build Docker images locally<a class="headerlink" href="#build-docker-images-locally" title="Link to this heading"></a></h2>
<p>To build the docker images locally, run:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>./build_docker_images.sh
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Install SUAVE locally" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="run.html" class="btn btn-neutral float-right" title="Run SUAVE" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Gustavo Rezende, Juliane Päßler, Jeroen Zwanepol, Elvin Alberts, Lizeth Tarifa, Ilias Gerostathopoulos, Einar Johnsen, Carlos Hernández.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>